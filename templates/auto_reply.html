<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>欢迎来到自动回帖</title>
</head>
<body>
{#<form action="/auto_reply_deal/" methord>#}
{#    #}
{#</form>#}
<table>
    <tr>
        <td>
            <button onclick="judgeRadioClicked()" style="margin-left:0px; margin-top:10px;width: 100px;height: 35px;font-size:16px">开始回帖</button>
        </td>
        <td>
            <button type="number"  id="return_reply_button"  onclick="return_reply()" style="margin-left:1450px;  margin-top:10px;width: 100px;height: 35px;font-size:16px">返回</button>
        </td>
    </tr>
</table>
<form action="/reply/" id="return_reply_form" method="GET" >

</form>

<form action="/auto_reply/" method="post" id="auto_reply_via_url_content">
            <table>
                <tr>
{#                    <td>#}
{#                        <p></p>#}
{#                    </td>#}
                    <td>
                        设置频率:<input type="number"  id="set_time_id" name="set_time_name" value="time" style="margin-left:0px; margin-top:10px; width:50px">秒
                    </td>
                    <td>
                        设置次数:<input type="number"  id="set_count_id" name="set_count_name" value="time" style="margin-left:0px; margin-top:10px; width:50px">次
                    </td>

{#                    <td>#}
{#                        <input type="radio"  id="s_radio_id" name="s_radio" value="start" style="margin-left:50px; margin-top:10px"> 开始回帖#}
{#                    </td>#}
{#                    <td>#}
{#                        <input type="radio"  id="e_radio_id" name="s_radio" value="end" style="margin-left:50px; margin-top:10px" > 停止回帖#}
{#                    </td>#}
{#                    <td>#}
{#                        <button onclick="judgeRadioClicked()" style="margin-left:50px; margin-top:10px">开始回帖</button>#}
{#                    </td>#}
                </tr>
            </table>
{% for m in message %}
  {% if forloop.counter == 1 %}
        <DIV align=center>
{#    <TABLE style="BORDER-COLLAPSE: collapse"  cellSpacing=1 cellPadding=0 width=400 border=0>#}


            <TABLE  cellSpacing=1 cellPadding=0 width=1650 border=0 >
              <TR>
                <TD>
                  <TABLE cellSpacing=1 cellPadding=0 width="100%" height="35" align=center summary="" border=0>
{#                      <TR>#}
{#                        <TD align=middle bgcolor="#f5f5dc" colSpan=5><FONT  size=2>链接表</FONT></TD>#}
{#                      </TR>#}
                      <TR>

                          <TD width="5%"  bgcolor="#deb887"><FONT  size=3>选择</FONT></TD>
                        <TD width="5%"  bgcolor="#deb887"><FONT size=3>编号</FONT></TD>
                        <TD width="45%"  bgcolor="#deb887"><FONT size=3>链接</FONT></TD>
                        <TD width="45%"  bgcolor="#deb887"><FONT size=3>备注</FONT></TD>

                      </TR>
                    </TABLE>
                 </TD>
              </TR>
              <TR>
                <TD>
                    <DIV style="OVERFLOW: auto; WIDTH: 100%; HEIGHT: 350px" class="table-responsive">
                      <TABLE style="BORDER-COLLAPSE: collapse"  height=273 cellSpacing=1 cellPadding=6 width="99%" class="table table-striped table-bordered">
                          {% for u in m %}
                                <TR>
                                  <TD width="5%" bgColor=#f5f5dc height=17><FONT size=3><input type="radio"  id="url_radio_id" name="url_radio" value={{ u.url }}></font></TD>
                                  <TD width="5%" bgColor=#f5f5dc height=17><FONT size=3 >{{ u.id }}</FONT></TD>
                                  <TD width="42%" bgColor=#f5f5dc height=17><FONT size=3><a href={{ u.url }} target="_blank">{{ u.url }}</a></FONT></TD>
                                  <TD width="43%" bgColor=#f5f5dc height=17><FONT size=3>{{ u.remark }}</FONT></TD>
                                  <td width="5%" bgColor=#f5f5dc height=17><a style="cursor: pointer" onclick="delete_url({{ u.id }})">删除</a></td>
                                </TR>
                            {% endfor %}
                      </TABLE>
                    </DIV>
                </TD>
                </TR>
{#              </TBODY>#}
            </TABLE>
{#                <input type="radio" name="sex" value="male" /> Male#}
{#                <br />#}
{#                <input type="radio" name="sex" value="Female" /> Female#}
        </DIV>
  {% elif forloop.counter == 2 %}
        <DIV align=center >
{#    <TABLE style="BORDER-COLLAPSE: collapse"  cellSpacing=1 cellPadding=0 width=400 border=0>#}
            <TABLE  cellSpacing=1 cellPadding=0 width=1650 border=0>
              <TR>
                <TD>
                  <TABLE cellSpacing=1 cellPadding=0 width="100%"  height="35" align=center summary="" border=0>
{#                      <TR>#}
{#                        <TD align=middle bgcolor="#f5f5dc" colSpan=5><FONT  size=2>回复内容表</FONT></TD>#}
{#                      </TR>#}
                      <TR>
                          <TD width="5%"  bgcolor="#deb887"><FONT  size=3>选择</FONT></TD>
                        <TD width="5%" bgcolor="#deb887"><FONT size=3>编号</FONT></TD>
                        <TD width="90%" bgcolor="#deb887"><FONT size=3>回复内容</FONT></TD>

                      </TR>
                    </TABLE>
                 </TD>
              </TR>
              <TR>
                <TD>
                    <DIV style="OVERFLOW: auto; WIDTH: 100%; HEIGHT: 350px" class="table-responsive">
                      <TABLE style="BORDER-COLLAPSE: collapse"  height=150 cellSpacing=1 cellPadding=6 width="99%" class="table table-striped table-bordered">
                          {% for r in m %}
                                <TR>
                                  <TD width="5%" bgColor=#f5f5dc height=17><FONT size=3><input type="radio" id="reply_radio_id" name="reply_radio" value={{ r.content }}></font></TD>
                                  <TD width="5%" bgColor=#f5f5dc height=17><FONT size=3>{{ r.id }}</FONT></TD>
                                  <TD width="90%" bgColor=#f5f5dc height=17><FONT size=3>{{ r.content }}</FONT></TD>
                                </TR>
                            {% endfor %}
                      </TABLE>
                    </DIV>
                </TD>
                </TR>
            </TABLE>
        </DIV>
    {% else %}
        {% if m %}
{#            alert("成功！");#}
            <p>发帖完成</p>
        {% else %}
{#            alert("失败！");#}
            <p>发帖失败</p>
        {% endif %}
{#      </script>#}
  {% endif %}
{% endfor %}


{#<button type="submit" name="reply" style="margin-left:15px;width: 100px;height: 35px" >回帖</button>#}
{#<input type="submit" name="reply" style="margin-left:50px; font-size: 14px;margin-top:0px;background:#f5f5dc; border-color:#f5f5dc" align="center" value="回帖">#}
</form>
</body>
</html>
<script>

    function judgeRadioClicked()
{
    //获得 单选选按钮name集合
    var url_radios = document.getElementsByName("url_radio");
    var reply_radios = document.getElementsByName("reply_radio");
    var url_flag = 0
    var reply_flag = 0
    //根据 name集合长度 遍历name集合
    for(var i=0;i<url_radios.length;i++)
    {
        //判断那个单选按钮为选中状态
        if(url_radios[i].checked) {
            //弹出选中单选按钮的值
            url_flag = 1
        }
    }
    for(var i=0;i<reply_radios.length;i++)
    {
        //判断那个单选按钮为选中状态
        if(reply_radios[i].checked) {
            //弹出选中单选按钮的值
            reply_flag = 1
        }
    }
    if (url_flag && reply_flag)
    {
        time = document.getElementById('set_time_id').value
        count = document.getElementById('set_count_id').value
        if (time>0 && count>0){
{#            flag = 0#}
{#            start = document.getElementById('s_radio_id').checked#}
{#            end = document.getElementById('e_radio_id').checked#}
{#            if ( start || end){#}
            document.getElementById('auto_reply_via_url_content').submit();
            alert('点击确定开始回帖！')
{#            }#}
{#            else{#}
{#                alert('请选择开始或者停止！')#}
{#            }#}
{#            alert(time)#}
        }
        else{
            alert("请输入正确的时间和次数！")
        }
{#        alert(time)#}
{#        document.getElementById('auto_reply_via_url_content').submit();#}
    }
    else
    {
        alert("请选择url地址和要回复的内容！");
    }
}


function return_reply(){
    document.getElementById('return_reply_form').submit();
}
</script>